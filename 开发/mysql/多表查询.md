###å¤šè¡¨æŸ¥è¯¢ 1.1	è¿æ¥æŸ¥è¯¢	äº¤å‰è¿æ¥:cross join	äº¤å‰è¿æ¥ï¼šæŸ¥è¯¢åˆ°çš„æ˜¯ä¸¤ä¸ªè¡¨çš„ç¬›å¡å°”ç§¯ã€‚	è¯­æ³•ï¼š	select  from è¡¨1 cross join è¡¨2;	select  from è¡¨1,è¡¨2;	å†…è¿æ¥:inner join(inneræ˜¯å¯ä»¥çœç•¥çš„)	æ˜¾ç¤ºå†…è¿æ¥ï¼šåœ¨SQLä¸­æ˜¾ç¤ºçš„è°ƒç”¨inner joinå…³é”®å­—	è¯­æ³•ï¼šselect  from è¡¨1 inner join è¡¨2 on å…³è”æ¡ä»¶;	éšå¼å†…è¿æ¥ï¼šåœ¨SQLä¸­æ²¡æœ‰è°ƒç”¨inner joinå…³é”®å­—	è¯­æ³•ï¼šselect  from è¡¨1,è¡¨2 where å…³è”æ¡ä»¶;	å¤–è¿æ¥:outer join(outerå¯ä»¥çœç•¥çš„)	å·¦å¤–è¿æ¥ï¼š	è¯­æ³•ï¼šselect  from è¡¨1 left outer join è¡¨2 on å…³è”æ¡ä»¶;	å³å¤–è¿æ¥	è¯­æ³•ï¼šselect  from è¡¨1 right outer join è¡¨2 on å…³è”æ¡ä»¶;1.2	å­æŸ¥è¯¢	å­æŸ¥è¯¢ï¼šä¸€ä¸ªæŸ¥è¯¢è¯­å¥æ¡ä»¶éœ€è¦ä¾èµ–å¦ä¸€ä¸ªæŸ¥è¯¢è¯­å¥çš„ç»“æœã€‚1.6	å¤šè¡¨æŸ¥è¯¢ä¹‹æ•°æ®å‡†å¤‡1.6.1	æ•°æ®å‡†å¤‡```
/*
SQLyog Ultimate v8.32 
MySQL - 5.5.27 : Database - day02_db1
*********************************************************************
*/


/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`day02_db1` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `day02_db1`;

/*Table structure for table `classes` */

DROP TABLE IF EXISTS `classes`;

CREATE TABLE `classes` (
  `cid` int(11) NOT NULL AUTO_INCREMENT,
  `cname` varchar(20) DEFAULT NULL,
  `cnum` int(11) DEFAULT NULL,
  PRIMARY KEY (`cid`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

/*Data for the table `classes` */

insert  into `classes`(`cid`,`cname`,`cnum`) values (1,'01ç­',NULL),(2,'02ç­',NULL),(3,'03ç­',NULL),(4,'04ç­',NULL);

/*Table structure for table `course` */

DROP TABLE IF EXISTS `course`;

CREATE TABLE `course` (
  `cid` int(11) NOT NULL AUTO_INCREMENT,
  `cname` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`cid`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

/*Data for the table `course` */

insert  into `course`(`cid`,`cname`) values (1,'java'),(2,'c++'),(3,'php');

/*Table structure for table `stu_cou` */

DROP TABLE IF EXISTS `stu_cou`;

CREATE TABLE `stu_cou` (
  `scid` int(11) NOT NULL AUTO_INCREMENT,
  `sno` int(11) DEFAULT NULL,
  `cno` int(11) DEFAULT NULL,
  `score` int(11) DEFAULT NULL,
  PRIMARY KEY (`scid`),
  KEY `FK_stu_cou_001` (`sno`),
  KEY `FK_stu_cou_002` (`cno`),
  CONSTRAINT `FK_stu_cou_002` FOREIGN KEY (`cno`) REFERENCES `course` (`cid`),
  CONSTRAINT `FK_stu_cou_001` FOREIGN KEY (`sno`) REFERENCES `students` (`sid`)
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8;

/*Data for the table `stu_cou` */

insert  into `stu_cou`(`scid`,`sno`,`cno`,`score`) values (1,1,1,80),(2,1,2,70),(3,2,2,90),(4,3,1,88),(5,3,2,90),(6,3,3,92),(7,4,1,70),(8,4,3,66),(9,5,2,85),(10,5,3,75),(11,6,3,98),(12,7,1,65),(13,7,2,60),(14,7,3,59),(15,8,1,88),(16,8,2,99),(17,9,1,100),(18,9,2,98),(19,9,3,100);

/*Table structure for table `students` */

DROP TABLE IF EXISTS `students`;

CREATE TABLE `students` (
  `sid` int(11) NOT NULL AUTO_INCREMENT,
  `sname` varchar(20) DEFAULT NULL,
  `cno` int(11) DEFAULT NULL,
  PRIMARY KEY (`sid`),
  KEY `FK_students_001` (`cno`),
  CONSTRAINT `FK_students_001` FOREIGN KEY (`cno`) REFERENCES `classes` (`cid`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;

/*Data for the table `students` */

insert  into `students`(`sid`,`sname`,`cno`) values (1,'å¼ ä¸‰',1),(2,'æå››',4),(3,'ç‹äº”',2),(4,'èµµå…­',3),(5,'å‘¨ä¸ƒ',4),(6,'ç”°å…«',1),(7,'å°æ˜',2),(8,'å°çº¢',3),(9,'å°åˆš',3);

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;


```æ‹·è´ä»¥ä¸ŠğŸ‘†å†…å®¹ä¿å­˜åˆ° test.sql æ–‡ä»¶ä¸­ã€‚ç„¶ååœ¨å‘½ä»¤è¡Œä¸‹å¯¼å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œ

>mysql> source  /Users/alfred/Desktop/demo/test.sql
>
>Query OK, 0 rows affected (0.00 sec)####1.1	å¤šè¡¨æŸ¥è¯¢ä¹‹äº¤å‰è¿æ¥* äº¤å‰è¿æ¥	ä½¿ç”¨cross joinå…³é”®å­—	>select * from classes course join students;	ä¸ä½¿ç”¨cross joinå…³é”®å­—	>SELECT * FROM classes, students;* å¤šè¡¨æŸ¥è¯¢ä¹‹å†…è¿æ¥	å†…è¿æ¥
	
	æ˜¾ç¤ºå†…è¿æ¥
	>select * from classes c inner join students s on c.cid = s.cno;	éšå¼å†…è¿æ¥	>SELECT * FROM classes c,students s WHERE c.cid = s.cno;	
* å¤šè¡¨æŸ¥è¯¢ä¹‹å¤–è¿æ¥	å¤–è¿æ¥	å·¦å¤–è¿æ¥	>SELECT * FROM classes c LEFT OUTER JOIN students s ON c.cid = s.cno;	å³å¤–è¿æ¥>select * from classes c right outer join students s on c.cid = s.cno;

```
mysql> select * from classes c right outer join students s on c.cid = s.cno;
+------+-------+------+-----+--------+------+
| cid  | cname | cnum | sid | sname  | cno  |
+------+-------+------+-----+--------+------+
|    1 | 01ç­  | NULL |   1 | å¼ ä¸‰   |    1 |
|    1 | 01ç­  | NULL |   6 | ç”°å…«   |    1 |
|    2 | 02ç­  | NULL |   3 | ç‹äº”   |    2 |
|    2 | 02ç­  | NULL |   7 | å°æ˜   |    2 |
|    3 | 03ç­  | NULL |   4 | èµµå…­   |    3 |
|    3 | 03ç­  | NULL |   8 | å°çº¢   |    3 |
|    3 | 03ç­  | NULL |   9 | å°åˆš   |    3 |
|    4 | 04ç­  | NULL |   2 | æå››   |    4 |
|    4 | 04ç­  | NULL |   5 | å‘¨ä¸ƒ   |    4 |
+------+-------+------+-----+--------+------+
9 rows in set (0.00 sec)
```* å¤šè¡¨æŸ¥è¯¢ä¹‹å†…è¿æ¥ä¸å¤–è¿æ¥çš„åŒºåˆ«1.1.1	å†…è¿æ¥å’Œå¤–è¿æ¥çš„åŒºåˆ«1.7	å¤šè¡¨æŸ¥è¯¢ä¹‹å­æŸ¥è¯¢1.7.1	å­æŸ¥è¯¢1.7.1.1	å¸¦inçš„å­æŸ¥è¯¢	æŸ¥è¯¢å­¦ç”Ÿç”Ÿæ—¥åœ¨91å¹´ä¹‹åçš„ç­çº§çš„ä¿¡æ¯ã€‚>select * from classes where cid in (SELECT cno FROM students WHERE birthday > '1991-01-01');```
mysql> select * from classes where cid in (SELECT cno FROM students WHERE birthday > '1991-01-01');
+-----+-------+------+
| cid | cname | cnum |
+-----+-------+------+
|   1 | 01ç­  |   20 |
|   2 | 02ç­  |   30 |
|   3 | 03ç­  |   32 |
|   4 | 04ç­  |   41 |
+-----+-------+------+
4 rows in set (0.00 sec)
```
1.7.1.2	å¸¦existsçš„å­æŸ¥è¯¢	æŸ¥è¯¢å­¦ç”Ÿç”Ÿæ—¥å¤§äº91å¹´1æœˆ1æ—¥ï¼Œå¦‚æœè®°å½•å­˜åœ¨ï¼Œå‰é¢çš„SQLè¯­å¥å°±ä¼šæ‰§è¡Œ>select * from classes where exists (SELECT cno FROM students WHERE birthday > '1991-01-01');

```
mysql> select * from classes where exists (SELECT cno FROM students WHERE birthday > '1991-01-01');
+-----+-------+------+
| cid | cname | cnum |
+-----+-------+------+
|   1 | 01ç­  |   20 |
|   2 | 02ç­  |   30 |
|   3 | 03ç­  |   32 |
|   4 | 04ç­  |   41 |
+-----+-------+------+
4 rows in set (0.00 sec)
```1.7.1.3	å¸¦anyçš„å­æŸ¥è¯¢>SELECT * FROM classes WHERE cid > ANY (SELECT cno FROM students );```
mysql> SELECT * FROM classes WHERE cid > ANY (SELECT cno FROM students );
+-----+-------+------+
| cid | cname | cnum |
+-----+-------+------+
|   2 | 02ç­  |   30 |
|   3 | 03ç­  |   32 |
|   4 | 04ç­  |   41 |
+-----+-------+------+
3 rows in set (0.00 sec)
```1.7.1.4	å¸¦allçš„å­æŸ¥è¯¢>SELECT * FROM classes WHERE cid > ALL (SELECT cno FROM students);1.8	å¤šè¡¨æŸ¥è¯¢ä¹‹ç»ƒä¹ 1.8.1	å¤šè¡¨æŸ¥è¯¢çš„ç»ƒä¹ 	æŸ¥è¯¢ç­çº§åç§°ï¼Œå’Œç­çº§æ€»äººæ•°>SELECT c.cname,COUNT(*) FROM classes c,students s WHERE c.cid = s.cno GROUP BY c.cname;

```
mysql> SELECT c.cname,COUNT(*) FROM classes c,students s WHERE c.cid = s.cno GROUP BY c.cname;
+-------+----------+
| cname | COUNT(*) |
+-------+----------+
| 01ç­  |        2 |
| 02ç­  |        2 |
| 03ç­  |        3 |
| 04ç­  |        2 |
+-------+----------+
4 rows in set (0.00 sec)
```æŸ¥è¯¢å­¦ç”Ÿçš„å§“åå’Œå­¦ç”Ÿæ‰€é€‰çš„æ€»è¯¾ç¨‹å¹³å‡æˆç»©ã€‚>select s.sname,avg(sc.score) from students s,stu_cou sc where s.sid = sc.sno group by s.sname;

```
mysql> select s.sname,avg(sc.score) from students s,stu_cou sc where s.sid = sc.sno group by s.sname;
+--------+---------------+
| sname  | avg(sc.score) |
+--------+---------------+
| å‘¨ä¸ƒ   |       80.0000 |
| å°åˆš   |       99.3333 |
| å°æ˜   |       61.3333 |
| å°çº¢   |       93.5000 |
| å¼ ä¸‰   |       75.0000 |
| æå››   |       90.0000 |
| ç‹äº”   |       90.0000 |
| ç”°å…«   |       98.0000 |
| èµµå…­   |       68.0000 |
+--------+---------------+
9 rows in set (0.00 sec)
```æŸ¥è¯¢å­¦ç”Ÿçš„å§“åå’Œå­¦ç”Ÿçš„é€‰è¯¾æ€»æ•°ï¼Œæ˜¾ç¤ºé€‰è¯¾è¶…è¿‡2é—¨å­¦ç”Ÿå§“åã€‚>select s.sname,count(\*) from students s,stu_cou sc where s.sid = sc.sno group by s.sname having count(*) > 2;

```
mysql> select s.sname,count(*) from students s,stu_cou sc where s.sid = sc.sno group by s.sname having count(*) > 2;
+--------+----------+
| sname  | count(*) |
+--------+----------+
| å°åˆš   |        3 |
| å°æ˜   |        3 |
| ç‹äº”   |        3 |
+--------+----------+
3 rows in set (0.00 sec)
```æŸ¥è¯¢å¹³å‡æˆç»©å¤§äº80åˆ†çš„å­¦ç”Ÿçš„æ€»æ•°ã€‚>select count(*) from students s where s.sid in (SELECT sc.sno FROM stu_cou sc GROUP BY sc.sno HAVING AVG(sc.score) >  80);```
mysql> select count(*) from students s where s.sid in (SELECT sc.sno FROM stu_cou sc GROUP BY sc.sno HAVING AVG(sc.score) > 80);
+----------+
| count(*) |
+----------+
|        5 |
+----------+
1 row in set (0.00 sec)


```æŸ¥è¯¢å­¦ç”Ÿå’Œå¹³å‡æˆç»©ï¼Œä½†æ˜¯å¹³å‡æˆç»©å¤§äº01ç­çš„ä»»ä½•ä¸€ä¸ªå­¦ç”Ÿçš„å¹³å‡æˆç»©ã€‚>select s.sname,avg(sc.score) from students s,stu_cou sc where s.sid = sc.sno group by s.sname having avg(sc.score) > any(SELECT AVG(sc.score) FROM students s,stu\_cou sc,classes c WHERE s.sid = sc.sno AND s.cno = c.cid AND c.cname= '01ç­' GROUP BY s.sname);```
mysql> select s.sname,avg(sc.score) from students s,stu_cou sc where s.sid = sc.sno group by s.sname having avg(sc.score) > any(SELECT AVG(sc.score) FROM students s,stu_cou sc,classes c WHERE s.sid = sc.sno AND s.cno = c.cid AND c.cname= '01ç­' GROUP BY s.sname);
+--------+---------------+
| sname  | avg(sc.score) |
+--------+---------------+
| å‘¨ä¸ƒ   |       80.0000 |
| å°åˆš   |       99.3333 |
| å°çº¢   |       93.5000 |
| æå››   |       90.0000 |
| ç‹äº”   |       90.0000 |
| ç”°å…«   |       98.0000 |
+--------+---------------+
6 rows in set (0.00 sec)
```